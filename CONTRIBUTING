#### CI

Project uses free Github actions as build/CI.
CI steps [definitions](.github)

#### Development setup

- Install [PHP](https://www.php.net/) & [Composer](https://getcomposer.org/) & [Docker Compose](https://docs.docker.com/compose/install/)
- Install [PHPStorm IDE](https://www.jetbrains.com/phpstorm/) with [PHP Inspections](https://github.com/kalessil/phpinspectionsea) or [VSCode IDE](https://code.visualstudio.com/)

```
docker-compose build
docker-compose up -d
docker-compose exec -T app.php composer install
...
docker-compose stop
```

PHP runs in docker containers, commands are executed against
- PHP7.4 - *app.php*
- PHP8.0 - *app.php80*
- PHP8.1 - *app.php81*

example
```
docker-compose exec %php-container% composer %composer-script%
```

#### How to check code quality before commit

```
# only modified files
git add -A
docker-compose exec app.php composer app-pre-commit
git commit -m "message-placeholder"
```
```
# all codebase
docker-compose exec app.php composer app-code-quality 
```

##### Run [PHPUnit](https://phpunit.de) test suite

```
docker-compose exec app.php composer app-phpunit
docker-compose exec app.php composer app-phpunit -- --filter SelectTest
```

##### Run PHP Code Beautifier & PHP [CodeSniffer](https://github.com/squizlabs/PHP_CodeSniffer) (all files)

```
docker-compose exec app.php composer app-phpcbf
docker-compose exec app.php composer app-phpcs
```

##### Run [Psalm](https://psalm.dev) - a static analysis tool for PHP (all files)

```
docker-compose exec app.php composer app-psalm
docker-compose exec app.php composer app-psalm-alter
docker-compose exec app.php composer app-psalm-taint
docker-compose exec app.php composer app-psalm-shepherd
```

##### Run [PHPStan](https://phpstan.org) - PHP Static Analysis Tool (all files)

```
docker-compose exec app.php composer app-phpstan`
```

##### Run [PHPMD](https://phpmd.org) - PHP Mess Detector

```
docker-compose exec app.php composer app-phpmd
```

##### Run [Phan](https://github.com/phan/phan) - PHP Phan static analyzer

```
docker-compose exec app.php composer app-phan
```

##### Run [phpDocumentor](https://www.phpdoc.org) - [phpDocumentor](https://docs.phpdoc.org/3.0/guide/references/phpdoc/tags/)

```
docker-compose exec app.php composer app-phpdoc
```

##### Run [PHPCPD](https://github.com/sebastianbergmann/phpcpd) - PHPCPD Copy/Paste Detector (CPD) for PHP code

```
docker-compose exec app.php composer app-phpcpd
```

##### Run [Pdepend](https://pdepend.org) - PHP quality of design - extensibility, reusability and maintainability

```
docker-compose exec app.php composer app-pdepend
```